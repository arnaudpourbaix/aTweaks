IF TRIGGER
  Target(NearestEnemyOf(Myself))
  TriggerBlock(CanCastMage|NoEnemyTrueSight)
  !StateCheck(Myself,STATE_MIRRORIMAGE)
THEN DO
  Action(SpellMyself,WIZARD_MIRROR_IMAGE|100|100)
END
